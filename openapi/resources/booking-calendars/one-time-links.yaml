booking-calendars--id--one-time-links:
  post:
    tags:
      - "Booking Calendars"
    summary: Create a one-time link
    description: |
      Creates a one time link for a booking calendar

      > [!note]
      > One-time links are only available for published booking calendars.

      > [!important]
      > One-time links that haven't been consumed will be automatically deleted after one year.
    operationId: booking-calendars-create-a-one-time-link
    parameters:
      - name: id
        in: path
        description: ID of the booking calendar
        schema:
          type: string
        required: true
    responses:
      "200":
        description: "200"
        content:
          application/json:
            examples:
              Result:
                value: |-
                  {
                    "id": "QUHVEKLPD93M",
                    "url": "https://oncehub.com/.QUHVEKLPD93M",
                    "creation_time": "2024-06-18T14:28:19Z"
                  }
            schema:
              type: object
              properties:
                id:
                  type: string
                  example: QUHVEKLPD93M
                url:
                  type: string
                  example: https://oncehub.com/.QUHVEKLPD93M
                creation_time:
                  type: string
                  example: "2024-06-18T14:28:19Z"
      "400":
        description: "400"
        content:
          application/json:
            examples:
              Result:
                value:
                  type: invalid_request_error
                  message: "This booking calendar does not allow creation of one time links: 'BKC-1234'"
                  param: id
            schema:
              $ref: "../../components/schemas/common.yaml#/Error"
      "404":
        description: "404"
        content:
          application/json:
            examples:
              Result:
                value:
                  type: invalid_request_error
                  message: "No such booking calendar: '123'"
                  param: id
            schema:
              $ref: "../../components/schemas/common.yaml#/Error"
    deprecated: false
