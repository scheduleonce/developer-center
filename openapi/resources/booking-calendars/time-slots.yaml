booking-calendars--id--time-slots:
  get:
    tags:
      - "Booking Calendars"
    summary: Get available time slots for a booking calendar
    description: |
      Returns a list of available time slots for a booking calendar

      > [!note]
      > Notes On Using This Endpoint
      > * All datetime strings are [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601) in full form. For example, `2024-11-29T09:30:00.000Z`.
      > * All datetime strings are in UTC.
      > * The difference between `start_time` and `end_time` must be less than or equal to 30 days.
    operationId: get-available-time-slots-for-booking-calendar
    parameters:
      - name: start_time
        in: query
        required: false
        description: >-
          The date and time from which to begin checking for available slots. If not provided, the system defaults to
          current time.
        schema:
          type: string
          format: date-time
          default: ""
      - name: end_time
        in: query
        required: false
        description: >-
          The date and time up to which to check for available slots. If not provided, the system defaults to one week
          from `start_time`.
        schema:
          type: string
          format: date-time
          default: ""
      - name: id
        in: path
        description: ID of the booking calendar
        schema:
          type: string
        required: true
    responses:
      "200":
        description: "200"
        content:
          application/json:
            schema:
              type: array
              items:
                type: object
                properties:
                  start_time:
                    type: string
                    format: date-time
                    description: The start time of the available slot in ISO 8601 format
                    example: "2024-12-02T06:30:00.000Z"
                  locations:
                    type: array
                    description: Available location options for this time slot
                    items:
                      type: object
                      properties:
                        type:
                          type: string
                          description: >-
                            The type of location. Possible values: `virtual` (online meetings with dynamic links),
                            `virtual_static` (online meetings with static links), `physical` (in-person meetings), or
                            `guest_phone` (phone calls).
                          enum:
                            - virtual
                            - virtual_static
                            - physical
                            - guest_phone
                          example: virtual
                        value:
                          type:
                            - string
                            - "null"
                          description: >-
                            The location value. For `virtual` locations: video conferencing platform (e.g.,
                            `google_meet`, `microsoft_teams`, `zoom`, `webex`, `gotomeeting`). For `virtual_static`
                            locations: `null` (the actual custom link is not known in advance). For `guest_phone`
                            locations: the phone number in E164 format. For `physical` locations: `null` (use `id`
                            field instead).
                          example: google_meet
                        id:
                          type:
                            - string
                            - "null"
                          description: The location ID. For `physical` locations, this is the address ID (e.g., `ADD-1234`). For other location types, this is `null`.
                          example: null
                      required:
                        - type
                        - value
                        - id
                required:
                  - start_time
                  - locations
            examples:
              Result:
                value:
                  - start_time: "2024-12-02T06:30:00.000Z"
                    locations:
                      - type: virtual
                        value: google_meet
                        id: null
                      - type: virtual_static
                        value: null
                        id: null
                      - type: guest_phone
                        value: "+12025550195"
                        id: null
                  - start_time: "2024-12-05T14:30:00.000Z"
                    locations:
                      - type: physical
                        value: null
                        id: ADD-17SE9FWWOC
      "400":
        description: "400"
        content:
          application/json:
            examples:
              Result:
                value:
                  type: invalid_request_error
                  message: "End time must be after the start time."
                  param: end_time
            schema:
              $ref: "../../components/schemas/common.yaml#/Error"
      "402":
        description: "402"
        content:
          application/json:
            examples:
              Result:
                value:
                  type: invalid_request_error
                  message: "Time slots cannot be retrieved when the host doesn't have a seat assigned."
            schema:
              $ref: "../../components/schemas/common.yaml#/Error"
      "422":
        description: "422"
        content:
          application/json:
            examples:
              Result:
                value:
                  type: invalid_request_error
                  message: "Time slots cannot be retrieved from an unpublished booking calendar."
                  param: id
            schema:
              $ref: "../../components/schemas/common.yaml#/Error"
    deprecated: false
