webhooks:
  post:
    tags:
      - "Webhooks"
    summary: Create a webhook
    description: Creates a webhook subscription.
    operationId: create-a-webhook
    requestBody:
      content:
        application/json:
          schema:
            type: object
            properties:
              url:
                type: string
                description: URL for receiving POST messages from OnceHub
              name:
                type: string
                description: Unique name for your Webhook subscription. This name is only used by you for reference.
              events:
                type: array
                description: An array of Booking lifecycle events that will trigger the Webhook.
                items:
                  type: string
    responses:
      "200":
        description: "200"
        content:
          application/json:
            examples:
              Example response:
                value: |-
                  {
                    "object": "webhook",
                    "id": "WHK-7JD9LBVZTQ",
                    "api_version": "v2",
                    "name": "New booking webhook",
                    "url": "https://mywebsite.com/webhooks/booking",
                    "events": ["booking.completed", "booking.rescheduled"],
                    "creation_time": "2020-09-06T20:57:17.467Z",
                    "secret": "d7686b8c83f04913929079aeae40189e"
                  }
            schema:
              type: object
              properties:
                object:
                  type: string
                  example: webhook
                id:
                  type: string
                  example: WHK-7JD9LBVZTQ
                api_version:
                  type: string
                  example: v2
                name:
                  type: string
                  example: New booking webhook
                url:
                  type: string
                  example: https://mywebsite.com/webhooks/booking
                events:
                  type: array
                  items:
                    type: string
                    example: booking.completed
                creation_time:
                  type: string
                  example: "2020-09-06T20:57:17.467Z"
                secret:
                  type: string
                  example: d7686b8c83f04913929079aeae40189e
      "409":
        description: "409"
        content:
          application/json:
            examples:
              Result:
                value: |-
                  {
                    "type": "invalid_request_error",
                    "message": "A webhook subscription with this name already exists: 'New Bookings'",
                    "param": "name"
                  }
            schema:
              type: object
              properties:
                type:
                  type: string
                  example: invalid_request_error
                message:
                  type: string
                  example: "A webhook subscription with this name already exists: 'New Bookings'"
                param:
                  type: string
                  example: name
    deprecated: false
