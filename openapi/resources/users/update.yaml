users--id:
  patch:
    tags:
      - "Users"
    summary: Update a user
    description: |
      Update an existing user's information in your OnceHub account

      > [!note]
      > Notes On Using This Endpoint
      > * At least one field must be provided to update
      > * The Account Owner role cannot be assigned or updated through the APIs
    operationId: update-a-user
    parameters:
      - name: id
        in: path
        description: ID of the user to update
        schema:
          type: string
        required: true
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            properties:
              first_name:
                type: string
                description: User's first name
                example: Andrea
              last_name:
                type: string
                description: User's last name
                example: Hartie
              role_name:
                type: string
                description: The role to assign to the user. Valid values are `Administrator`, `Member`, or `Team Manager`.
                enum:
                  - Administrator
                  - Member
                  - Team Manager
                example: Administrator
              teams:
                type: array
                items:
                  type: string
                description: Array of team external IDs to assign the user to. This will replace existing team assignments.
                example: ["TM-GCJU8DLBTPY1", "TM-ABC123DEF456"]
          examples:
            "Update name and role":
              value:
                first_name: Andrea
                last_name: Hartie
                role_name: Administrator
            "Update teams only":
              value:
                teams: ["TM-GCJU8DLBTPY1"]
    responses:
      "200":
        description: "200"
        content:
          application/json:
            examples:
              Result:
                value:
                  id: USR-FSD423423
                  object: user
                  first_name: Andrea
                  last_name: Hartie
                  email: AndreaHartie@example.com
                  status: active
                  role_name: Administrator
                  timezone: America/Chicago
                  teams:
                    - TM-GCJU8DLBTPY1
            schema:
              $ref: "../../components/schemas/user.yaml#/User"
      "400":
        description: "400"
        content:
          application/json:
            examples:
              "No fields provided":
                value:
                  type: invalid_request_error
                  message: "At least one field must be provided to update."
                  param: body
              "Invalid first name":
                value:
                  type: invalid_request_error
                  message: "Invalid first name: ''"
                  param: first_name
              "Invalid role name":
                value:
                  type: invalid_request_error
                  message: "Invalid role name: 'InvalidRole'"
                  param: role_name
              "Account Owner role not allowed":
                value:
                  type: invalid_request_error
                  message: "The 'Account Owner' role cannot be assigned directly via the API."
                  param: role_name
              "Invalid teams format":
                value:
                  type: invalid_request_error
                  message: "Must be an array of strings."
                  param: teams
              "Invalid team IDs":
                value:
                  type: invalid_request_error
                  message: "Invalid team(s): 'TM-INVALID1', 'TM-INVALID2'"
                  param: teams
              "Unsupported field":
                value:
                  type: invalid_request_error
                  message: "Unsupported field"
                  param: "{param_name}"
            schema:
              $ref: "../../components/schemas/common.yaml#/Error"
      "403":
        description: "403"
        content:
          application/json:
            examples:
              "Cannot update Account Owner":
                value:
                  type: invalid_request_error
                  message: "Cannot update 'Account Owner' user."
            schema:
              $ref: "../../components/schemas/common.yaml#/Error"
      "404":
        description: "404"
        content:
          application/json:
            examples:
              "User not found":
                value:
                  type: invalid_request_error
                  message: "No such user: 'USR-NOTFOUND'"
                  param: id
            schema:
              $ref: "../../components/schemas/common.yaml#/Error"
      "410":
        description: "410"
        content:
          application/json:
            examples:
              "User deleted":
                value:
                  type: invalid_request_error
                  message: "User cannot be modified as they have been deleted: 'USR-A1B2C3'"
                  param: id
            schema:
              $ref: "../../components/schemas/common.yaml#/Error"
    deprecated: false
